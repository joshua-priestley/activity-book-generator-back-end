# Activity Book Generator Back-end

## Quickstart

```shell
# Clone
git clone git@gitlab.doc.ic.ac.uk:g216002122/activity-book-generator-back-end.git
cd activity-book-generator-back-end

# Set up python virtual environment
python3 -m venv venv
. venv/bin/activate
pip3 install --upgrade pip && pip3 install -r requirements.txt


#For PDF generation - if you get "No wkhtmltopdf executable found" then install:
sudo apt-get install wkhtmltopdf

# Tell Flask where to find the app
export FLASK_APP=activitygen

# Use development environment
export FLASK_ENV=development

# Run app
flask run
```
This runs the server on http://localhost:5000.

## Environment Variables

The following environment variables should be set when developing locally:

* `NOUN_PROJECT_API_KEY`: The Noun Project API key, used as the client ID for OAuth 1.0a authentication.
* `NOUN_PROJECT_API_SECRET`: The Noun Project API secret, used as the client secret for OAuth 1.0a authentication.

## Testing

Run tests using `pytest`. Add `-v` for more details.

Measure code coverage using `coverage run -m pytest`.
View the coverage report in terminal by running `coverage report`. Alternatively, an HTML report may be generated by running `coverage html` and opening `htmlcov/index.html` in a browser.

# Accessing deployments
Production URL (following the master branch): http://cloud-vm-43-100.doc.ic.ac.uk:8080/ \
Development URL (following the dev branch): http://cloud-vm-43-101.doc.ic.ac.uk:8080/ \
Note that these URLs may only be accessed from the College network.
